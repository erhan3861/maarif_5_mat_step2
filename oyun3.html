<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y√ºzl√ºk Ressam - G√∂rev 3</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@700&display=swap" rel="stylesheet">
    <style>
        /* --- GENEL AYARLAR (SANAT TEMASI) --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
            background-color: #fce4ec;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 235, 59, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(33, 150, 243, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(233, 30, 99, 0.2) 0%, transparent 30%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #444;
            overflow: hidden;
            user-select: none; /* Metin se√ßimini engelle */
        }

        /* --- √úST BUTONLAR --- */
        .top-bar {
            position: absolute; top: 20px; width: 95%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 50; pointer-events: none;
        }
        .right-group { display: flex; gap: 10px; pointer-events: auto; }
        
        .top-btn {
            padding: 8px 20px; border-radius: 25px; border: none;
            font-family: 'Nunito', sans-serif; font-weight: 800; font-size: 0.9rem;
            text-decoration: none; cursor: pointer; transition: all 0.3s;
            display: flex; align-items: center; justify-content: center;
            pointer-events: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .home-btn { background: #ff4081; color: white; }
        .code-btn { background: #3f51b5; color: white; }
        .full-btn { background: #00bcd4; color: white; }

        .top-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.2); }

        /* --- OYUN ALANI (≈û√ñVALE & TUVAL) --- */
        .easel-container {
            position: relative;
            background: #8d6e63; /* Ah≈üap rengi */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 20px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            transform: scale(0.95);
        }

        /* G√∂rev Levhasƒ± */
        .mission-board {
            background: #fff;
            padding: 10px 30px;
            border-radius: 5px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            text-align: center;
            font-size: 1.2rem;
            transform: rotate(-1deg);
        }
        .target-val { font-family: 'Pacifico', cursive; color: #e91e63; font-size: 2rem; }

        /* 10x10 Izgara (Tuval) */
        .canvas-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            background: #fff;
            padding: 10px;
            border: 1px solid #ccc;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            cursor: crosshair;
            touch-action: none; /* Mobilde kaydƒ±rmayƒ± engelle */
        }

        .pixel {
            width: 30px; height: 30px;
            background: #eee;
            border-radius: 2px;
            transition: background 0.05s; /* Daha hƒ±zlƒ± tepki */
        }

        .pixel:hover { background: #ddd; }
        .pixel.painted { background: #ff4081; box-shadow: inset 0 0 5px rgba(0,0,0,0.2); }

        /* ƒ∞pucu Yazƒ±sƒ± */
        .hint-text {
            font-size: 0.8rem; color: rgba(255,255,255,0.8); margin-top: 5px; font-style: italic;
        }

        /* Alt Panel */
        .paint-stats {
            margin-top: 10px;
            background: #fff;
            padding: 5px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: #555;
        }

        .check-btn {
            margin-top: 15px;
            background: #4caf50; color: white;
            border: none; padding: 10px 40px;
            font-size: 1.2rem; border-radius: 30px;
            cursor: pointer; font-weight: bold;
            box-shadow: 0 5px 0 #388e3c;
            transition: transform 0.1s;
        }
        .check-btn:active { transform: translateY(4px); box-shadow: none; }

        /* Feedback Overlay */
        .feedback-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95); display: none;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; border-radius: 10px; text-align: center;
        }

        .next-btn {
            margin-top: 20px; padding: 12px 30px; background: #2196f3; color: white;
            border: none; border-radius: 25px; cursor: pointer; font-weight: bold;
        }

        /* ≈ûifre Kartƒ± */
        .secret-card {
            border: 3px dashed #e91e63; padding: 20px; border-radius: 15px; 
            background: #fce4ec; margin-top: 15px; display: none;
        }
        .secret-letter { font-size: 4rem; color: #c2185b; font-weight: 900; display: block; font-family: 'Nunito'; }

        /* KODLAMA MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8); z-index: 1000;
            display: none; align-items: center; justify-content: center;
        }
        .modal-card {
            background: #fff; padding: 30px; border-radius: 20px; max-width: 450px;
            text-align: center; color: #333; position: relative; border-top: 5px solid #3f51b5;
        }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer; border: none; background: none; }
        .action-link { display: block; background: #333; color: white; padding: 12px; border-radius: 10px; text-decoration: none; margin: 10px 0; font-weight: bold; }

        @media (max-height: 700px) {
            .pixel { width: 25px; height: 25px; }
            .easel-container { transform: scale(0.85); }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <a href="index.html" class="top-btn home-btn">‚åÇ ANA MEN√ú</a>
        <div class="right-group">
            <button onclick="openCodeModal()" class="top-btn code-btn">‚å® KODLA</button>
            <button onclick="toggleFullScreen()" id="full-btn" class="top-btn full-btn">‚õ∂ TAM EKRAN</button>
        </div>
    </div>

    <div class="easel-container">
        <div style="color:white; font-size:0.8rem; margin-bottom:5px;">ESER: <span id="level-display">1/5</span></div>
        
        <div class="mission-board">
            Bu deƒüeri boya: 
            <div class="target-val" id="target-text">%25</div>
        </div>

        <div class="canvas-grid" id="grid">
            </div>
        
        <div class="hint-text">üí° ƒ∞PUCU: Tƒ±kla ve s√ºr√ºkle! (Boyalƒ± yerden ba≈ülarsan siler)</div>

        <div class="paint-stats">
            BOYANAN: <span id="painted-count">0</span> / 100
        </div>

        <button class="check-btn" onclick="checkPainting()">KONTROL ET ‚úî</button>

        <div class="feedback-overlay" id="feedback">
            <h1 style="font-size: 4rem; margin:0;">üé®</h1>
            <h2 style="color:#e91e63;" id="fb-title">MUHTE≈ûEM ESER!</h2>
            <p id="fb-msg">Oranlarƒ± m√ºkemmel yansƒ±ttƒ±n.</p>
            
            <div class="secret-card" id="secret-card">
                ≈ûƒ∞FRE PAR√áASI:
                <span class="secret-letter">N</span>
            </div>

            <button class="next-btn" id="next-btn" onclick="nextLevel()">SONRAKƒ∞ ESER ‚ñ∂</button>
        </div>
    </div>

    <div class="modal-overlay" id="codeModal">
        <div class="modal-card">
            <button class="close-btn" onclick="closeCodeModal()">√ó</button>
            <h2 style="color:#3f51b5;">üé® Dijital Tuval</h2>
            <p style="color:#666;">Pikselleri kodlarla boyamaya ne dersin?</p>
            <a href="https://github.com/erhan3861/maarif_5_mat_1/blob/main/oyun3.html" target="_blank" class="action-link" style="background:#333;">üêô GitHub Kaynak Kodu</a>
            <a href="https://app.talent14.com/codeEditor" target="_blank" class="action-link" style="background:#3f51b5;">‚ú® Talent14 Edit√∂r√º</a>
        </div>
    </div>

    <script>
        // --- TAM EKRAN ---
        function toggleFullScreen() {
            const btn = document.getElementById('full-btn');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                btn.innerHTML = "‚õ∂ K√ú√á√úLT";
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    btn.innerHTML = "‚õ∂ TAM EKRAN";
                }
            }
        }

        // --- OYUN VERƒ∞LERƒ∞ ---
        const levels = [
            { type: 'percent', val: 20, text: "%20" },        
            { type: 'decimal', val: 50, text: "0,50" },       
            { type: 'fraction', val: 25, text: "25/100" },    
            { type: 'decimal', val: 75, text: "0,75" },       
            { type: 'mixed', val: 10, text: "1/10" }          
        ];

        let currentIdx = 0;
        let paintedCount = 0;
        
        // S√ºr√ºkle-Boya Deƒüi≈ükenleri
        let isDrawing = false;
        let isErasing = false;

        window.onload = initGame;

        function initGame() {
            createGrid();
            loadLevel();
            
            // Saƒü tƒ±klamayƒ± engelle (tarayƒ±cƒ± men√ºs√º a√ßƒ±lmasƒ±n)
            document.addEventListener('contextmenu', event => event.preventDefault());
            
            // √áizim bittiƒüinde (fare bƒ±rakƒ±ldƒ±ƒüƒ±nda)
            document.addEventListener('mouseup', () => isDrawing = false);
        }

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = "";
            for (let i = 0; i < 100; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.dataset.index = i;
                
                // --- S√úR√úKLE BOYA OLAYLARI ---
                
                // 1. Tƒ±klama Ba≈üladƒ±ƒüƒ±nda (Mousedown)
                pixel.addEventListener('mousedown', (e) => {
                    isDrawing = true;
                    // Eƒüer tƒ±klanan zaten boyalƒ±ysa, silme moduna ge√ß
                    isErasing = e.target.classList.contains('painted');
                    
                    togglePixel(e.target, isErasing); // ƒ∞lk kutuyu i≈üle
                });

                // 2. √úzerine Gelindiƒüinde (Mouseenter)
                pixel.addEventListener('mouseenter', (e) => {
                    if (isDrawing) {
                        togglePixel(e.target, isErasing);
                    }
                });

                grid.appendChild(pixel);
            }
        }

        function togglePixel(el, eraseMode) {
            if (eraseMode) {
                // Silme modu: Sadece boyalƒ±ysa sil
                if (el.classList.contains('painted')) {
                    el.classList.remove('painted');
                    paintedCount--;
                }
            } else {
                // Boyama modu: Boyalƒ± deƒüilse boya
                if (!el.classList.contains('painted')) {
                    el.classList.add('painted');
                    paintedCount++;
                }
            }
            document.getElementById('painted-count').innerText = paintedCount;
        }

        function loadLevel() {
            if (currentIdx >= levels.length) {
                showFinalSecret();
                return;
            }

            const data = levels[currentIdx];
            
            // UI Sƒ±fƒ±rla
            document.getElementById('level-display').innerText = (currentIdx + 1) + "/" + levels.length;
            document.getElementById('target-text').innerText = data.text;
            document.getElementById('painted-count').innerText = "0";
            document.getElementById('feedback').style.display = 'none';
            
            // Izgarayƒ± Temizle
            const pixels = document.querySelectorAll('.pixel');
            pixels.forEach(p => p.classList.remove('painted'));
            paintedCount = 0;
        }

        function checkPainting() {
            const target = levels[currentIdx].val;
            const fb = document.getElementById('feedback');
            const title = document.getElementById('fb-title');
            const msg = document.getElementById('fb-msg');
            const nextBtn = document.getElementById('next-btn');

            if (paintedCount === target) {
                // Doƒüru
                fb.style.display = 'flex';
                
                if (currentIdx === levels.length - 1) {
                    title.innerText = "USTA RESSAM!";
                    msg.innerText = "T√ºm g√∂sterimleri ba≈üarƒ±yla modelledin.";
                    document.getElementById('secret-card').style.display = 'block';
                    nextBtn.innerText = "ANA MEN√úYE D√ñN";
                    nextBtn.onclick = () => window.location.href = 'index.html';
                } else {
                    title.innerText = "HARƒ∞KA!";
                    msg.innerText = `${levels[currentIdx].text} tam olarak ${target} kutuya e≈üittir.`;
                    document.getElementById('secret-card').style.display = 'none';
                    nextBtn.innerText = "SONRAKƒ∞ ESER ‚ñ∂";
                    nextBtn.onclick = nextLevel;
                }

            } else {
                // Yanlƒ±≈ü
                alert(`Hen√ºz olmadƒ±! ${target} kutu boyaman lazƒ±m ama sen ${paintedCount} tane boyadƒ±n.`);
            }
        }

        function nextLevel() {
            currentIdx++;
            loadLevel();
        }

        function showFinalSecret() {
            // G√ºvenlik
        }

        // --- KODLAMA MODAL ---
        function openCodeModal() { document.getElementById('codeModal').style.display = 'flex'; }
        function closeCodeModal() { document.getElementById('codeModal').style.display = 'none'; }
        document.getElementById('codeModal').addEventListener('click', function(e) {
            if(e.target === this) closeCodeModal();
        });

    </script>
</body>
</html>