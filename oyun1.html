<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kesir Fabrikasƒ± - G√∂rev 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        /* --- GENEL AYARLAR (FABRƒ∞KA TEMASI) --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto Mono', monospace;
            background-color: #2c3e50;
            /* End√ºstriyel Izgara Arkaplan */
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #ecf0f1;
            overflow: hidden;
        }

        /* --- √úST BUTON GRUBU --- */
        .top-bar {
            position: absolute;
            top: 20px;
            width: 95%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 50;
            pointer-events: none; /* Aradaki bo≈üluk tƒ±klamayƒ± engellemesin */
        }

        .right-group {
            display: flex;
            gap: 10px;
            pointer-events: auto;
        }

        .top-btn {
            padding: 8px 20px; border-radius: 5px;
            font-family: 'Orbitron', sans-serif; font-weight: 700; font-size: 0.9rem;
            text-decoration: none; cursor: pointer;
            transition: all 0.3s; letter-spacing: 1px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
            border: none;
            display: flex; align-items: center; justify-content: center;
            pointer-events: auto;
        }

        .home-btn { 
            background: #e67e22; color: white; border: 2px solid #d35400; 
        }
        .code-btn { 
            background: #3498db; color: white; border: 2px solid #2980b9; 
        }
        .full-btn {
            background: #95a5a6; color: white; border: 2px solid #7f8c8d;
        }

        .top-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 0 rgba(0,0,0,0.3); }
        .top-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.3); }

        /* --- OYUN KONSOLU --- */
        .console-container {
            width: 90%; max-width: 600px;
            background: #34495e;
            border: 4px solid #7f8c8d;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
        }

        /* √úst Panel: Hedef */
        .target-display {
            background: #000;
            color: #2ecc71; /* Terminal Ye≈üili */
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 2px solid #555;
            text-shadow: 0 0 10px rgba(46, 204, 113, 0.7);
        }

        .fraction { display: inline-block; vertical-align: middle; text-align: center; font-size: 1.8rem; }
        .frac-top { border-bottom: 2px solid #2ecc71; display: block; padding: 0 5px; }
        .frac-bottom { display: block; padding: 0 5px; }

        /* G√∂rselle≈ütirme Alanƒ± (T√ºp/Bar) */
        .tank-container {
            width: 100%; height: 60px;
            background: #2c3e50;
            border: 3px solid #95a5a6;
            border-radius: 30px;
            position: relative;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.5);
        }

        /* Dolum √áubuƒüu */
        .liquid {
            height: 100%; width: 0%;
            background: repeating-linear-gradient(
                45deg,
                #f39c12,
                #f39c12 10px,
                #e67e22 10px,
                #e67e22 20px
            );
            transition: width 0.3s cubic-bezier(0.4, 2.5, 0.55, 0.6); /* Sƒ±√ßrama efekti */
            border-right: 2px solid #fff;
        }

        /* B√∂lmeler (Grid) */
        .grid-lines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
        }
        .grid-segment {
            flex: 1; border-right: 1px dashed rgba(255,255,255,0.3); height: 100%;
        }
        .grid-segment:last-child { border-right: none; }

        /* Kontrol Paneli */
        .control-panel {
            display: flex; flex-direction: column; align-items: center; gap: 10px;
        }

        .add-btn {
            background: #27ae60; color: white;
            border: none; border-radius: 50%;
            width: 80px; height: 80px;
            font-size: 2rem; cursor: pointer;
            box-shadow: 0 5px 0 #1e8449, 0 10px 20px rgba(0,0,0,0.3);
            transition: all 0.1s;
            display: flex; align-items: center; justify-content: center;
        }

        .add-btn:active { transform: translateY(4px); box-shadow: 0 1px 0 #1e8449; }

        .btn-label { font-size: 0.9rem; color: #bdc3c7; margin-top: 5px; }

        /* Mevcut Durum Metni */
        .current-status {
            font-size: 1.2rem; color: #ecf0f1; margin-top: 15px; font-weight: bold;
        }

        /* FEEDBACK OVERLAY */
        .feedback-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; color: white; text-align: center; border-radius: 15px;
        }

        .next-btn {
            margin-top: 20px; padding: 10px 30px; background: #3498db; color: white;
            border: none; border-radius: 5px; cursor: pointer; font-family: 'Orbitron'; font-weight: bold;
        }

        /* ≈ûƒ∞FRE KARTI */
        .secret-card {
            border: 2px dashed #f1c40f; padding: 20px; border-radius: 10px; background: rgba(241, 196, 15, 0.1);
            margin-top: 15px; display: none;
        }
        .secret-letter { font-size: 3rem; color: #f1c40f; font-weight: bold; display: block; }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); z-index: 1000;
            display: none; align-items: center; justify-content: center;
        }
        .modal-card {
            background: #fff; padding: 30px; border-radius: 10px; max-width: 400px;
            text-align: center; color: #333; position: relative;
        }
        .close-btn {
            position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; border: none; background: none;
        }
        .action-link {
            display: block; background: #333; color: white; padding: 10px; border-radius: 5px; text-decoration: none; margin: 10px 0;
        }

    </style>
</head>
<body>

    <div class="top-bar">
        <a href="index.html" class="top-btn home-btn">‚åÇ ANA MEN√ú</a>
        <div class="right-group">
            <button onclick="openCodeModal()" class="top-btn code-btn">‚å® KODLA</button>
            <button onclick="toggleFullScreen()" id="full-btn" class="top-btn full-btn">‚õ∂ TAM EKRAN</button>
        </div>
    </div>

    <div class="console-container">
        <div style="text-align: right; font-size: 0.8rem; color: #95a5a6; margin-bottom: 5px;">√úRETƒ∞M HATTI: <span id="level-indicator">1/5</span></div>
        
        <div class="target-display">
            HEDEF: 
            <div class="fraction">
                <span class="frac-top" id="target-num">3</span>
                <span class="frac-bottom" id="target-denom">5</span>
            </div>
             √úRET
        </div>

        <div class="tank-container">
            <div class="grid-lines" id="grid-lines">
                </div>
            <div class="liquid" id="liquid-bar"></div>
        </div>

        <div class="current-status">
            MEVCUT: <span id="current-text">0/5</span>
        </div>

        <div class="control-panel">
            <button class="add-btn" onclick="addUnit()">+</button>
            <div class="btn-label">Bƒ∞Rƒ∞M KESƒ∞R EKLE <br> (<span id="unit-val">1/5</span>)</div>
        </div>

        <div class="feedback-overlay" id="feedback">
            <h1 id="fb-icon" style="font-size: 4rem; margin:0;">‚úÖ</h1>
            <h2 id="fb-title">√úRETƒ∞M TAMAMLANDI!</h2>
            <p id="fb-msg">Birim kesirleri birle≈ütirerek hedefe ula≈ütƒ±n.</p>
            
            <div class="secret-card" id="secret-card">
                ≈ûƒ∞FRE PAR√áASI BULUNDU:
                <span class="secret-letter">D</span>
            </div>

            <button class="next-btn" id="next-btn" onclick="nextLevel()">SONRAKƒ∞ Sƒ∞PARƒ∞≈û ‚ñ∂</button>
        </div>
    </div>

    <div class="modal-overlay" id="codeModal">
        <div class="modal-card">
            <button class="close-btn" onclick="closeCodeModal()">√ó</button>
            <h2 style="color:#2980b9;">üõ† Fabrika Yazƒ±lƒ±mƒ±</h2>
            <p>√úretim bandƒ±nƒ± kodlarla y√∂net!</p>
            <a href="https://github.com/erhan3861/maarif_5_mat_1/blob/main/oyun1.html" target="_blank" class="action-link" style="background:#333;">üêô GitHub Kaynak Kodu</a>
            <a href="https://app.talent14.com/codeEditor" target="_blank" class="action-link" style="background:#8e44ad;">‚ú® Talent14 Edit√∂r√º</a>
        </div>
    </div>

    <script>
        // --- TAM EKRAN KONTROL√ú ---
        function toggleFullScreen() {
            const btn = document.getElementById('full-btn');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                btn.innerHTML = "‚õ∂ K√ú√á√úLT";
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    btn.innerHTML = "‚õ∂ TAM EKRAN";
                }
            }
        }

        // --- OYUN VERƒ∞LERƒ∞ ---
        const levels = [
            { num: 3, denom: 5 },  // 3/5
            { num: 2, denom: 4 },  // 2/4 (Yarƒ±m)
            { num: 5, denom: 6 },  // 5/6
            { num: 4, denom: 4 },  // 4/4 (Tam)
            { num: 7, denom: 8 }   // 7/8
        ];

        let currentLevelIdx = 0;
        let currentFill = 0; // Ka√ß birim eklendi

        window.onload = initLevel;

        function initLevel() {
            if (currentLevelIdx >= levels.length) {
                showFinalSecret();
                return;
            }

            const data = levels[currentLevelIdx];
            currentFill = 0;

            // UI G√ºncelle
            document.getElementById('level-indicator').innerText = (currentLevelIdx + 1) + "/" + levels.length;
            document.getElementById('target-num').innerText = data.num;
            document.getElementById('target-denom').innerText = data.denom;
            document.getElementById('unit-val').innerText = "1/" + data.denom;
            document.getElementById('current-text').innerText = "0/" + data.denom;
            
            // Barƒ± Sƒ±fƒ±rla
            document.getElementById('liquid-bar').style.width = "0%";
            document.getElementById('feedback').style.display = 'none';

            // Grid √áizgilerini Olu≈ütur (Payda kadar b√∂lme)
            createGrid(data.denom);
        }

        function createGrid(segments) {
            const container = document.getElementById('grid-lines');
            container.innerHTML = "";
            for (let i = 0; i < segments; i++) {
                const div = document.createElement('div');
                div.className = 'grid-segment';
                container.appendChild(div);
            }
        }

        function addUnit() {
            const data = levels[currentLevelIdx];
            
            if (currentFill < data.num) {
                currentFill++;
                updateVisuals(data);

                if (currentFill === data.num) {
                    setTimeout(() => {
                        showSuccess();
                    }, 500); // Animasyon bitince g√∂ster
                }
            } else {
                // Fazla basarsa (opsiyonel: hata sesi veya sallanma efekti)
            }
        }

        function updateVisuals(data) {
            // Barƒ± doldur
            const percent = (currentFill / data.denom) * 100;
            document.getElementById('liquid-bar').style.width = percent + "%";
            
            // Metni g√ºncelle
            document.getElementById('current-text').innerText = currentFill + "/" + data.denom;
        }

        function showSuccess() {
            const fb = document.getElementById('feedback');
            const title = document.getElementById('fb-title');
            const msg = document.getElementById('fb-msg');
            const nextBtn = document.getElementById('next-btn');

            fb.style.display = 'flex';
            
            if (currentLevelIdx === levels.length - 1) {
                // Son level
                title.innerText = "G√ñREV TAMAMLANDI!";
                msg.innerText = "T√ºm sipari≈üler hazƒ±rlandƒ±. ƒ∞≈üte ≈üifre par√ßan:";
                document.getElementById('secret-card').style.display = 'block';
                nextBtn.innerText = "ANA MEN√úYE D√ñN";
                nextBtn.onclick = () => window.location.href = "index.html";
            } else {
                title.innerText = "√úRETƒ∞M BA≈ûARILI!";
                msg.innerText = "Birim kesirler birle≈üti ve √ºr√ºn hazƒ±r.";
                document.getElementById('secret-card').style.display = 'none';
                nextBtn.innerText = "SONRAKƒ∞ Sƒ∞PARƒ∞≈û ‚ñ∂";
                nextBtn.onclick = nextLevel;
            }
        }

        function nextLevel() {
            currentLevelIdx++;
            initLevel();
        }

        // --- KODLAMA MODAL ---
        function openCodeModal() {
            document.getElementById('codeModal').style.display = 'flex';
        }
        function closeCodeModal() {
            document.getElementById('codeModal').style.display = 'none';
        }
        document.getElementById('codeModal').addEventListener('click', function(e) {
            if(e.target === this) closeCodeModal();
        });

    </script>
</body>
</html>