<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kutup Operasyonu - MAT.5.1.2</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- GENEL TEMA: BUZUL / OKYANUS --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, #83a4d4 0%, #b6fbff 100%); /* Buz Mavisi */
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            color: #2c3e50;
        }

        /* --- √úST BUTONLAR --- */
        .top-bar {
            position: absolute;
            top: 20px;
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        /* Saƒü tarafƒ± gruplamak i√ßin */
        .right-group {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
            border: 2px solid white;
            color: #0d47a1;
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s, background 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            background: white;
        }

        /* --- OYUN ALANI --- */
        .game-container {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 40px;
            width: 90%;
            max-width: 800px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 100, 200, 0.2);
            border: 5px solid #e1f5fe;
            position: relative;
        }

        /* Karakter ve G√∂rsel */
        .character-area {
            font-size: 5rem;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Soru Alanƒ± */
        .scenario-text {
            font-size: 1.1rem;
            color: #455a64;
            background: #e1f5fe;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #039be5;
            text-align: left;
        }

        .math-problem {
            font-family: 'Fredoka', sans-serif;
            font-size: 2rem;
            color: #0277bd;
            margin: 20px 0;
            font-weight: bold;
        }

        /* Se√ßenekler */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .option-btn {
            background: white;
            border: 2px solid #b3e5fc;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.3rem;
            color: #0277bd;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Fredoka', sans-serif;
        }

        .option-btn:hover {
            background: #03a9f4;
            color: white;
            transform: scale(1.05);
        }

        /* --- MODALLAR --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 1000; display: none;
            align-items: center; justify-content: center;
        }

        .modal-card {
            background: white; width: 90%; max-width: 500px;
            border-radius: 20px; padding: 30px; text-align: center;
            position: relative; border: 4px solid #039be5;
        }

        .feedback-correct { color: #2e7d32; }
        .feedback-wrong { color: #c62828; }

        .next-btn {
            background: #0277bd; color: white; border: none; padding: 10px 30px;
            font-size: 1.2rem; border-radius: 10px; cursor: pointer; margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
            .math-problem { font-size: 1.5rem; }
            .top-bar { flex-direction: column; gap: 10px; }
            .right-group { width: 100%; justify-content: space-between; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <a href="index.html" class="nav-btn">
            <span>üè†</span> Ana Men√º
        </a>

        <div class="right-group">
            <button onclick="openCodeModal()" class="nav-btn">
                <span>üíª</span> KODLA
            </button>
            <button onclick="toggleFullScreen()" class="nav-btn" id="screenBtn">
                <span id="screenIcon">‚õ∂</span> <span id="screenText">TAM EKRAN</span>
            </button>
        </div>
    </div>

    <div class="game-container" id="game-screen">
        <div class="character-area">üêª‚Äç‚ùÑÔ∏è üßä</div>
        
        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color:#0277bd; font-weight:bold;">
            <span>G√∂rev: <span id="q-num">1</span>/5</span>
            <span>Puan: <span id="score">0</span></span>
        </div>

        <div class="scenario-text" id="scenario">
            Senaryo y√ºkleniyor...
        </div>

        <div class="math-problem" id="problem">
            ƒ∞≈ülem y√ºkleniyor...
        </div>

        <div class="options-grid" id="options-area">
            </div>
    </div>

    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-card">
            <h2 id="fb-title" class="feedback-correct">HARƒ∞KA!</h2>
            <div style="font-size: 3rem;" id="fb-icon">‚úÖ</div>
            <p id="fb-msg" style="font-size: 1.1rem; color:#555; margin: 15px 0;">
                Buzullarƒ±n erimesini engelledin!
            </p>
            <button class="next-btn" onclick="nextQuestion()">Devam Et ‚ñ∂</button>
        </div>
    </div>

    <div class="modal-overlay" id="endModal">
        <div class="modal-card">
            <h2 style="color:#0277bd;">G√ñREV TAMAMLANDI! üèÜ</h2>
            <p>Doƒüa dostu bir matematik√ßisin.</p>
            <h1 id="final-score" style="font-size: 3rem; margin: 10px 0;">0</h1>
            <p>Puan topladƒ±n.</p>
            <a href="index.html" class="next-btn" style="text-decoration: none; display:inline-block;">Ana Men√ºye D√∂n</a>
        </div>
    </div>

    <div class="modal-overlay" id="codeModal">
        <div class="modal-card" style="border-color: #238636;">
            <button onclick="closeCodeModal()" style="position:absolute; top:10px; right:15px; border:none; background:none; font-size:1.5rem; cursor:pointer;">√ó</button>
            <h2 style="color:#238636;">üöÄ Kodlama Laboratuvarƒ±</h2>
            <p>Bu oyunun kodlarƒ±nƒ± incelemek ister misin?</p>
            
            <a href="https://github.com/erhan3861/maarif_5_mat_1/blob/main/oyun1.html" target="_blank" 
               style="display:block; background:#333; color:white; padding:12px; border-radius:10px; text-decoration:none; margin:10px 0; font-weight:bold;">
                üêô GitHub Kaynak Kodu
            </a>
            <a href="https://app.talent14.com/codeEditor" target="_blank" 
               style="display:block; background:#673ab7; color:white; padding:12px; border-radius:10px; text-decoration:none; font-weight:bold;">
                ‚ú® Talent14 Edit√∂r√º
            </a>
        </div>
    </div>

    <script>
        // --- TAM EKRAN FONKSƒ∞YONU ---
        function toggleFullScreen() {
            const btnIcon = document.getElementById('screenIcon');
            const btnText = document.getElementById('screenText');

            if (!document.fullscreenElement) {
                // Tam ekrana ge√ß
                document.documentElement.requestFullscreen().catch(err => {
                    alert(`Hata: ${err.message}`);
                });
            } else {
                // Tam ekrandan √ßƒ±k
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Ekran durumu deƒüi≈ütiƒüinde butonu g√ºncelle (ESC tu≈üu vb. i√ßin)
        document.addEventListener('fullscreenchange', (event) => {
            const btnIcon = document.getElementById('screenIcon');
            const btnText = document.getElementById('screenText');
            
            if (document.fullscreenElement) {
                btnIcon.innerHTML = '‚Üô'; // K√º√ß√ºltme ikonu
                btnText.innerText = 'K√ú√á√úLT';
            } else {
                btnIcon.innerHTML = '‚õ∂'; // B√ºy√ºtme ikonu
                btnText.innerText = 'TAM EKRAN';
            }
        });
        // ------------------------------

        // --- SENARYOLAR VE SORULAR ---
        const questions = [
            {
                scenario: "K√ºresel ƒ±sƒ±nma nedeniyle kutup foklarƒ±nƒ±n ya≈üam alanlarƒ± azalmaktadƒ±r. Son 10 yƒ±lda yakla≈üƒ±k 45.485 futbol sahasƒ± kadar ve sadece bu yƒ±l 51.373 futbol sahasƒ± kadar buzul erimi≈ütir.",
                problem: "Toplam ne kadar buzul eridi?",
                options: ["96.858", "95.758", "96.758", "97.858"],
                correct: 0,
                msg: "Doƒüru! ƒ∞ki deƒüeri toplayarak toplam erimeyi buldun: 45.485 + 51.373 = 96.858"
            },
            {
                scenario: "Bir √ßevre kurulu≈üu, kutuplarda 75.000 fokun ya≈üadƒ±ƒüƒ±nƒ± tahmin ediyordu. Ancak yapƒ±lan sayƒ±mda 62.450 fok olduƒüu g√∂r√ºld√º.",
                problem: "Tahmin ile ger√ßek arasƒ±ndaki fark ka√ßtƒ±r?",
                options: ["13.550", "12.550", "12.450", "13.450"],
                correct: 1,
                msg: "Tebrikler! √áƒ±karma i≈ülemiyle farkƒ± buldun: 75.000 - 62.450 = 12.550"
            },
            {
                scenario: "Antarktika'ya ara≈ütƒ±rma yapmak i√ßin 12.500 kg yiyecek ve 18.250 kg teknik ekipman g√∂nderildi.",
                problem: "Toplam y√ºk ka√ß kg'dƒ±r?",
                options: ["30.750", "30.500", "29.750", "31.000"],
                correct: 0,
                msg: "Harika! Toplam y√ºk: 12.500 + 18.250 = 30.750 kg"
            },
            {
                scenario: "Bir buzdaƒüƒ±nƒ±n k√ºtlesi ba≈ülangƒ±√ßta 84.600 tondu. Yaz mevsiminde 23.400 tonu eridi.",
                problem: "Geriye ka√ß ton buz kaldƒ±?",
                options: ["60.200", "61.200", "59.200", "61.000"],
                correct: 1,
                msg: "Doƒüru! Kalan miktar: 84.600 - 23.400 = 61.200 ton"
            },
            {
                scenario: "ƒ∞ki √ßevre gemisi yola √ßƒ±ktƒ±. Birinci gemi 24.150 km, ikinci gemi ise 32.840 km yol kat etti.",
                problem: "ƒ∞ki gemi toplam ka√ß km yol gitti?",
                options: ["56.890", "56.990", "57.090", "55.990"],
                correct: 1,
                msg: "M√ºkemmel! Toplam yol: 24.150 + 32.840 = 56.990 km"
            }
        ];

        let currentIdx = 0;
        let score = 0;

        // Oyunu Ba≈ülat
        window.onload = loadQuestion;

        function loadQuestion() {
            const q = questions[currentIdx];
            document.getElementById('q-num').innerText = currentIdx + 1;
            document.getElementById('score').innerText = score;
            document.getElementById('scenario').innerText = q.scenario;
            document.getElementById('problem').innerText = q.problem;

            const optsDiv = document.getElementById('options-area');
            optsDiv.innerHTML = ""; // Temizle

            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(idx);
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIdx) {
            const q = questions[currentIdx];
            const modal = document.getElementById('feedbackModal');
            const title = document.getElementById('fb-title');
            const msg = document.getElementById('fb-msg');
            const icon = document.getElementById('fb-icon');

            if (selectedIdx === q.correct) {
                score += 20;
                title.innerText = "HARƒ∞KA!";
                title.className = "feedback-correct";
                icon.innerText = "‚úÖ";
                msg.innerText = q.msg;
            } else {
                title.innerText = "Dƒ∞KKAT!";
                title.className = "feedback-wrong";
                icon.innerText = "‚ö†Ô∏è";
                msg.innerText = "Yanlƒ±≈ü hesaplama. Doƒüru cevap: " + q.options[q.correct];
            }
            modal.style.display = 'flex';
        }

        function nextQuestion() {
            document.getElementById('feedbackModal').style.display = 'none';
            currentIdx++;
            if (currentIdx < questions.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            document.getElementById('final-score').innerText = score;
            document.getElementById('endModal').style.display = 'flex';
        }

        // Kodlama Modalƒ± ƒ∞≈ülemleri
        function openCodeModal() {
            document.getElementById('codeModal').style.display = 'flex';
        }
        function closeCodeModal() {
            document.getElementById('codeModal').style.display = 'none';
        }
    </script>
</body>
</html>