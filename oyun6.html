<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√∂n√º≈ü√ºm Lab - G√∂rev 6</title>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        /* --- GENEL AYARLAR (Sƒ∞MYA/LAB TEMASI) --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto Mono', monospace;
            background-color: #1a0b2e;
            /* Gizemli Arkaplan */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(118, 74, 188, 0.2) 0%, transparent 50%),
                repeating-linear-gradient(45deg, rgba(0,0,0,0.1) 0, rgba(0,0,0,0.1) 1px, transparent 1px, transparent 10px);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #d1c4e9;
            overflow: hidden;
        }

        /* --- √úST BUTONLAR --- */
        .top-bar {
            position: absolute; top: 20px; width: 95%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 50; pointer-events: none;
        }
        .right-group { display: flex; gap: 10px; pointer-events: auto; }
        
        .top-btn {
            padding: 8px 20px; border-radius: 8px; border: none;
            font-family: 'Roboto Mono', monospace; font-weight: bold; font-size: 0.9rem;
            text-decoration: none; cursor: pointer; transition: all 0.2s;
            display: flex; align-items: center; justify-content: center;
            pointer-events: auto; box-shadow: 0 4px 0 rgba(0,0,0,0.3);
        }

        .home-btn { background: #673ab7; color: #fff; border: 2px solid #9575cd; }
        .code-btn { background: #00b894; color: #fff; border: 2px solid #55efc4; }
        .full-btn { background: #636e72; color: white; border: 2px solid #b2bec3; }

        .top-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 0 rgba(0,0,0,0.3); filter: brightness(1.2); }
        .top-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.3); }

        /* --- OYUN ALANI --- */
        .lab-container {
            position: relative;
            width: 90%; max-width: 600px;
            text-align: center;
            display: flex; flex-direction: column; align-items: center;
        }

        /* KAZAN (Reactor) */
        .cauldron-wrapper {
            position: relative;
            width: 250px; height: 250px;
            margin-bottom: 30px;
        }

        .cauldron {
            width: 100%; height: 100%;
            background: radial-gradient(circle, #311b92 30%, #000 100%);
            border-radius: 50%;
            border: 5px solid #7e57c2;
            box-shadow: 0 0 30px #673ab7;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative;
            z-index: 2;
            overflow: hidden;
        }

        /* Kabarcƒ±k Animasyonu */
        .cauldron::before {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml;utf8,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="2" fill="rgba(255,255,255,0.2)"/></svg>');
            animation: bubbleUp 3s linear infinite;
            opacity: 0.5;
        }

        @keyframes bubbleUp { from { background-position: 0 100%; } to { background-position: 0 0; } }

        .question-val {
            font-family: 'Creepster', cursive;
            font-size: 3.5rem; color: #00ffcc;
            text-shadow: 0 0 10px #00ffcc;
            z-index: 3;
        }
        
        .question-label {
            font-size: 0.9rem; color: #b39ddb; margin-top: 5px; z-index: 3; letter-spacing: 1px;
        }

        /* Duman Efekti (Basit) */
        .steam {
            position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 50px;
            background: radial-gradient(ellipse, rgba(255,255,255,0.4) 0%, transparent 70%);
            filter: blur(10px);
            animation: steamFloat 2s infinite ease-in-out alternate;
            z-index: 1;
        }
        @keyframes steamFloat { from { opacity: 0.3; transform: translateX(-50%) scale(0.8); } to { opacity: 0.6; transform: translateX(-50%) scale(1.2); } }

        /* SE√áENEKLER (ƒ∞ksir ≈ûi≈üeleri) */
        .potions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            width: 100%;
        }

        .potion-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #7e57c2;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex; flex-direction: column; align-items: center;
            position: relative; overflow: hidden;
        }

        .potion-btn:hover {
            background: rgba(126, 87, 194, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 0 15px #673ab7;
            border-color: #00ffcc;
        }

        .potion-liquid {
            width: 40px; height: 40px;
            background: #ff4081; /* Default renk, JS ile deƒüi≈üebilir  */
            border-radius: 50%;
            margin-bottom: 10px;
            box-shadow: inset -2px -2px 5px rgba(0,0,0,0.5);
            border: 2px solid #fff;
        }

        .potion-val {
            font-size: 1.5rem; font-weight: bold; color: #fff;
        }

        /* GERƒ∞ Bƒ∞LDƒ∞Rƒ∞M */
        .feedback-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(26, 11, 46, 0.95); display: none;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; border-radius: 20px;
        }

        .magic-icon { font-size: 4rem; margin-bottom: 10px; animation: spinMagic 3s infinite linear; }
        @keyframes spinMagic { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .next-btn {
            margin-top: 20px; padding: 12px 30px; background: #00e676; color: #004d40;
            border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1.1rem;
            box-shadow: 0 0 10px #00e676;
        }

        /* ≈ûƒ∞FRE KARTI */
        .secret-card {
            border: 2px dashed #00e676; padding: 20px; border-radius: 10px; 
            background: rgba(0, 230, 118, 0.1); margin-top: 15px; display: none;
        }
        .secret-letter { font-size: 3rem; color: #00e676; font-weight: bold; display: block; letter-spacing: 5px; }

        /* KODLAMA MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); z-index: 1000;
            display: none; align-items: center; justify-content: center;
        }
        .modal-card {
            background: #fff; padding: 30px; border-radius: 15px; max-width: 450px;
            text-align: center; color: #333; position: relative; border-top: 5px solid #673ab7;
        }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; border: none; background: none; }
        .action-link { display: block; background: #333; color: white; padding: 12px; border-radius: 8px; text-decoration: none; margin: 10px 0; font-weight: bold; }

    </style>
</head>
<body>

    <div class="top-bar">
        <a href="index.html" class="top-btn home-btn">‚åÇ ANA MEN√ú</a>
        <div class="right-group">
            <button onclick="openCodeModal()" class="top-btn code-btn">‚å® KODLA</button>
            <button onclick="toggleFullScreen()" id="full-btn" class="top-btn full-btn">‚õ∂ TAM EKRAN</button>
        </div>
    </div>

    <div class="lab-container">
        
        <div style="margin-bottom:10px; font-size:0.9rem; color:#b39ddb;">D√ñN√ú≈û√úM DENEYƒ∞: <span id="level-display">1/5</span></div>

        <div class="cauldron-wrapper">
            <div class="steam"></div>
            <div class="cauldron">
                <div class="question-val" id="q-val">1/2</div>
                <div class="question-label" id="q-label">KESƒ∞R HALƒ∞</div>
            </div>
        </div>

        <p style="margin-bottom:20px;">Buna denk olan formu se√ß:</p>

        <div class="potions-grid" id="options-area">
            </div>

        <div class="feedback-overlay" id="feedback">
            <div class="magic-icon">‚ú®</div>
            <h2 style="color:#00ffcc;" id="fb-title">D√ñN√ú≈û√úM BA≈ûARILI!</h2>
            <p id="fb-msg">Madde yeni formuna kavu≈ütu.</p>
            
            <div class="secret-card" id="secret-card">
                ≈ûƒ∞FRE PAR√áASI:
                <span class="secret-letter">ƒ∞K</span>
            </div>

            <button class="next-btn" id="next-btn" onclick="nextLevel()">SONRAKƒ∞ DENEY ‚ñ∂</button>
        </div>

    </div>

    <div class="modal-overlay" id="codeModal">
        <div class="modal-card">
            <button class="close-btn" onclick="closeCodeModal()">√ó</button>
            <h2 style="color:#673ab7;">‚öóÔ∏è Simya Kodlarƒ±</h2>
            <p style="color:#666;">D√∂n√º≈ü√ºm form√ºllerini kodlarla yaz!</p>
            <a href="https://github.com/erhan3861/maarif_5_mat_1/blob/main/oyun6.html" target="_blank" class="action-link" style="background:#1a0b2e;">üêô GitHub Kaynak Kodu</a>
            <a href="https://app.talent14.com/codeEditor" target="_blank" class="action-link" style="background:#00b894;">‚ú® Talent14 Edit√∂r√º</a>
        </div>
    </div>

    <script>
        // --- TAM EKRAN ---
        function toggleFullScreen() {
            const btn = document.getElementById('full-btn');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                btn.innerHTML = "‚õ∂ K√ú√á√úLT";
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    btn.innerHTML = "‚õ∂ TAM EKRAN";
                }
            }
        }

        // --- OYUN VERƒ∞LERƒ∞ ---
        // MAT.5.1.3: D√∂n√º≈ü√ºmler (Kesir <-> Ondalƒ±k <-> Y√ºzde)
        const levels = [
            { 
                q: "1/2", type: "KESƒ∞R", 
                opts: [
                    { val: "0,5", correct: true, color: "#ff4081" },
                    { val: "0,2", correct: false, color: "#00e676" },
                    { val: "1,2", correct: false, color: "#2979ff" },
                    { val: "0,05", correct: false, color: "#ffab00" }
                ],
                msg: "1/2 Yarƒ±m demektir, ondalƒ±k olarak 0,5'tir."
            },
            { 
                q: "0,25", type: "ONDALIK", 
                opts: [
                    { val: "%25", correct: true, color: "#2979ff" },
                    { val: "%50", correct: false, color: "#ff4081" },
                    { val: "%2,5", correct: false, color: "#00e676" },
                    { val: "%5", correct: false, color: "#ffab00" }
                ],
                msg: "0,25 √ßeyrektir, y√ºzde olarak %25'tir."
            },
            { 
                q: "%80", type: "Y√úZDE", 
                opts: [
                    { val: "4/5", correct: true, color: "#00e676" },
                    { val: "1/5", correct: false, color: "#ff4081" },
                    { val: "8/1000", correct: false, color: "#2979ff" },
                    { val: "3/4", correct: false, color: "#ffab00" }
                ],
                msg: "%80 = 80/100. Sadele≈ütirirsek (20'ye b√∂l) 4/5 olur."
            },
            { 
                q: "3/4", type: "KESƒ∞R", 
                opts: [
                    { val: "0,75", correct: true, color: "#ffab00" },
                    { val: "0,34", correct: false, color: "#00e676" },
                    { val: "3,4", correct: false, color: "#ff4081" },
                    { val: "0,43", correct: false, color: "#2979ff" }
                ],
                msg: "3/4 = 75/100 = 0,75."
            },
            { 
                q: "1 TAM", type: "B√úT√úN", 
                opts: [
                    { val: "%100", correct: true, color: "#ff4081" },
                    { val: "%10", correct: false, color: "#00e676" },
                    { val: "0,1", correct: false, color: "#2979ff" },
                    { val: "1/100", correct: false, color: "#ffab00" }
                ],
                msg: "Bir b√ºt√ºn (Tam) %100'e e≈üittir."
            }
        ];

        let currentIdx = 0;

        window.onload = loadLevel;

        function loadLevel() {
            if (currentIdx >= levels.length) {
                return;
            }

            const data = levels[currentIdx];
            
            // UI G√ºncelle
            document.getElementById('level-display').innerText = (currentIdx + 1) + "/" + levels.length;
            document.getElementById('q-val').innerText = data.q;
            document.getElementById('q-label').innerText = data.type + " HALƒ∞";
            document.getElementById('feedback').style.display = 'none';

            // Se√ßenekleri Karƒ±≈ütƒ±r ve Ekle
            const container = document.getElementById('options-area');
            container.innerHTML = "";
            
            // Basit karƒ±≈ütƒ±rma (Shuffling)
            let shuffledOpts = [...data.opts].sort(() => Math.random() - 0.5);

            shuffledOpts.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'potion-btn';
                btn.onclick = () => checkAnswer(opt, data);
                
                btn.innerHTML = `
                    <div class="potion-liquid" style="background:${opt.color}; box-shadow: 0 0 10px ${opt.color};"></div>
                    <div class="potion-val">${opt.val}</div>
                `;
                container.appendChild(btn);
            });
        }

        function checkAnswer(selectedOpt, levelData) {
            if (selectedOpt.correct) {
                showFeedback(true, levelData.msg);
            } else {
                alert("Yanlƒ±≈ü ƒ∞ksir! Karƒ±≈üƒ±m bozuldu. Tekrar dene.");
            }
        }

        function showFeedback(isSuccess, msgText) {
            const fb = document.getElementById('feedback');
            const title = document.getElementById('fb-title');
            const msg = document.getElementById('fb-msg');
            const nextBtn = document.getElementById('next-btn');

            fb.style.display = 'flex';
            msg.innerText = msgText;

            if (currentIdx === levels.length - 1) {
                title.innerText = "Sƒ∞MYACI √úSTADI!";
                title.style.color = "#00ffcc";
                msg.innerText = "T√ºm d√∂n√º≈ü√ºmleri ustaca yaptƒ±n. ƒ∞≈üte son ≈üifre par√ßan:";
                document.getElementById('secret-card').style.display = 'block';
                nextBtn.innerText = "ANA MEN√úYE D√ñN";
                nextBtn.onclick = () => window.location.href = 'index.html';
            } else {
                document.getElementById('secret-card').style.display = 'none';
                nextBtn.innerText = "SONRAKƒ∞ DENEY ‚ñ∂";
                nextBtn.onclick = nextLevel;
            }
        }

        function nextLevel() {
            currentIdx++;
            loadLevel();
        }

        // --- KODLAMA MODAL ---
        function openCodeModal() { document.getElementById('codeModal').style.display = 'flex'; }
        function closeCodeModal() { document.getElementById('codeModal').style.display = 'none'; }
        document.getElementById('codeModal').addEventListener('click', function(e) {
            if(e.target === this) closeCodeModal();
        });

    </script>
</body>
</html>